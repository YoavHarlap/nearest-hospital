<!DOCTYPE html>
<html lang="he">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vocabulary Trainer</title>

<style>
  body {
    margin: 0;
    background: #f2f2f2;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }

  .app {
    width: 100%;
    max-width: 420px;
    background: #ffffff;
    padding: 24px;
    box-sizing: border-box;
    text-align: center;
  }

  .status {
    font-size: 14px;
    color: #555;
    margin-bottom: 12px;
  }

  .word {
    font-size: 42px;
    font-weight: 700;
    margin: 24px 0;
  }

  .meaning {
    font-size: 24px;
    color: #333;
    min-height: 36px;
    margin-bottom: 24px;
  }

  button {
    width: 100%;
    padding: 16px;
    margin: 8px 0;
    font-size: 18px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
  }

  .show { background: #e0e0e0; }
  .know { background: #4CAF50; color: white; }
  .dont { background: #f44336; color: white; }
  .mode { background: #2196F3; color: white; }
  .reset { background: #9e9e9e; color: white; }
</style>
</head>

<body>
<div class="app">

  <div class="status" id="status"></div>

  <div class="word" id="word"></div>
  <div class="meaning" id="meaning"></div>

  <button class="show" onclick="showMeaning()">×”×¦×’ ×¤×™×¨×•×©</button>

  <button class="know" onclick="knowWord()">×™×“×¢×ª×™</button>
  <button class="dont" onclick="dontKnowWord()">×œ× ×™×“×¢×ª×™</button>

  <button class="mode" onclick="switchMode()" id="modeBtn"></button>
  <button class="reset" onclick="resetUnknown()">××™×¤×•×¡ ×¨×©×™××ª ×œ× ×™×“×¢×ª×™</button>

</div>

<script>
/* ======= ×××’×¨ ××™×œ×™× ======= */
const WORDS = [
  { en: "pledge", he: "×œ×”×ª×—×™×™×‘; ×”×‘×˜×—×”" },
  { en: "plot", he: "×¢×œ×™×œ×”; ××–×™××”" },
  { en: "poem", he: "×©×™×¨" },
  { en: "power", he: "×›×•×—" },
  { en: "progress", he: "×”×ª×§×“××•×ª" },
  { en: "trust", he: "×××•×Ÿ" },
  { en: "vulnerable", he: "×¤×’×™×¢" },
  { en: "zone", he: "××–×•×¨" }
  // â¬† ×›××Ÿ × ××¦××•×ª ×‘×¤×•×¢×œ ×›×œ 2,229 ×”××™×œ×™×
];

const STORAGE_KEY = "unknownWords";
let mode = "all"; // all | unknown
let currentWord = null;

/* ======= ××—×¡×•×Ÿ ======= */
function getUnknown() {
  return new Set(JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]"));
}
function saveUnknown(set) {
  localStorage.setItem(STORAGE_KEY, JSON.stringify([...set]));
}

/* ======= ×œ×•×’×™×§×” ======= */
function activeList() {
  const unknown = getUnknown();
  return mode === "unknown"
    ? WORDS.filter(w => unknown.has(w.en))
    : WORDS;
}

function randomWord() {
  const list = activeList();
  if (list.length === 0) {
    alert("××™×Ÿ ××™×œ×™× ×‘××¦×‘ ×”×–×” ğŸ‰");
    return null;
  }
  return list[Math.floor(Math.random() * list.length)];
}

function loadWord() {
  currentWord = randomWord();
  if (!currentWord) return;
  document.getElementById("word").textContent = currentWord.en;
  document.getElementById("meaning").textContent = "";
  updateStatus();
}

function showMeaning() {
  if (currentWord)
    document.getElementById("meaning").textContent = currentWord.he;
}

/* ======= ×›×¤×ª×•×¨×™× ======= */

// ×™×“×¢×ª×™:
// â€¢ ××¦×™×’ ×¤×™×¨×•×© ×œ×¨×’×¢
// â€¢ ×× ×‘××¦×‘ "×¨×§ ×œ× ×™×“×¢×ª×™" â€“ ××¡×™×¨ ××”×¨×©×™××”
// â€¢ ×¢×•×‘×¨ ×œ××™×œ×” ×”×‘××”
function knowWord() {
  if (!currentWord) return;

  const set = getUnknown();

  showMeaning();

  if (mode === "unknown") {
    set.delete(currentWord.en);
    saveUnknown(set);
  }

  setTimeout(loadWord, 500);
}

// ×œ× ×™×“×¢×ª×™:
// â€¢ ××•×¡×™×£ ×œ×¨×©×™××”
// â€¢ ××¦×™×’ ×¤×™×¨×•×©
// â€¢ ×¢×•×‘×¨ ×œ××™×œ×” ×”×‘××”
function dontKnowWord() {
  if (!currentWord) return;

  const set = getUnknown();
  set.add(currentWord.en);
  saveUnknown(set);

  showMeaning();
  setTimeout(loadWord, 500);
}

function switchMode() {
  mode = mode === "all" ? "unknown" : "all";
  loadWord();
}

function resetUnknown() {
  if (confirm("×œ××—×•×§ ××ª ×›×œ ×¨×©×™××ª '×œ× ×™×“×¢×ª×™'?")) {
    localStorage.removeItem(STORAGE_KEY);
    loadWord();
  }
}

function updateStatus() {
  const unknownCount = getUnknown().size;

  document.getElementById("status").textContent =
    `××¦×‘: ${mode === "all" ? "×›×œ ×”××™×œ×™×" : "×¨×§ ×œ× ×™×“×¢×ª×™"} | ×œ× ×™×“×¢×ª×™: ${unknownCount}`;

  document.getElementById("modeBtn").textContent =
    mode === "all"
      ? "×¢×‘×•×¨ ×œ×¨×©×™××ª ×”×œ× ×™×“×¢×ª×™"
      : "×¢×‘×•×¨ ×œ×›×œ ×”××™×œ×™×";
}

/* ======= ×”×ª×—×œ×” ======= */
loadWord();
</script>

</body>
</html>
